{"ast":null,"code":"import axios from \"axios\";\nimport { baseURL } from \"../utils/requestUtil\";\nimport { ALL_PRODUCT_REQUEST, ALL_PRODUCT_SUCCESS, ALL_PRODUCT_FAIL, PRODUCT_DETAILS_REQUEST, PRODUCT_DETAILS_FAIL, PRODUCT_DETAILS_SUCCESS, CLEAR_ERRORS } from \"../constants/productConstants\";\nexport const getProduct = function () {\n  let keyword = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  let currentPage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  let price = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [0, 25000];\n  let category = arguments.length > 3 ? arguments[3] : undefined;\n  let ratings = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n  return async dispatch => {\n    console.log(baseURL);\n\n    try {\n      dispatch({\n        type: ALL_PRODUCT_REQUEST\n      });\n      let link = `${baseURL}/api/v1/products?keyword=${keyword}&page=${currentPage}&price[gte]=${price[0]}&price[lte]=${price[1]}&ratings[gte]=${ratings}`;\n\n      if (category) {\n        link = `${baseURL}/api/v1/products?keyword=${keyword}&page=${currentPage}&price[gte]=${price[0]}&price[lte]=${price[1]}&category=${category}&ratings[gte]=${ratings}`;\n      }\n\n      const {\n        data\n      } = await axios.get(link);\n      dispatch({\n        type: ALL_PRODUCT_SUCCESS,\n        payload: data\n      });\n    } catch (error) {\n      dispatch({\n        type: ALL_PRODUCT_FAIL,\n        payload: error.response.data.message\n      });\n    }\n  };\n};\nexport const getProductDetails = id => async dispatch => {\n  try {\n    dispatch({\n      type: PRODUCT_DETAILS_REQUEST\n    });\n    const {\n      data\n    } = await axios.get(`${baseURL}/api/v1/product/${id}`);\n    dispatch({\n      type: PRODUCT_DETAILS_SUCCESS,\n      payload: data.product\n    });\n  } catch (error) {\n    dispatch({\n      type: PRODUCT_DETAILS_FAIL,\n      payload: error.response.data.message\n    });\n  }\n};\nexport const clearErrors = () => async dispatch => {\n  dispatch({\n    type: CLEAR_ERRORS\n  });\n};","map":{"version":3,"sources":["E:/Tuanh/MERN Project Ecommerce/frontend/src/actions/productAction.js"],"names":["axios","baseURL","ALL_PRODUCT_REQUEST","ALL_PRODUCT_SUCCESS","ALL_PRODUCT_FAIL","PRODUCT_DETAILS_REQUEST","PRODUCT_DETAILS_FAIL","PRODUCT_DETAILS_SUCCESS","CLEAR_ERRORS","getProduct","keyword","currentPage","price","category","ratings","dispatch","console","log","type","link","data","get","payload","error","response","message","getProductDetails","id","product","clearErrors"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,sBAAxB;AACA,SACCC,mBADD,EAECC,mBAFD,EAGCC,gBAHD,EAICC,uBAJD,EAKCC,oBALD,EAMCC,uBAND,EAOCC,YAPD,QAQO,+BARP;AAUA,OAAO,MAAMC,UAAU,GAAG;AAAA,MAACC,OAAD,uEAAW,EAAX;AAAA,MAAeC,WAAf,uEAA6B,CAA7B;AAAA,MAAgCC,KAAhC,uEAAwC,CAAC,CAAD,EAAI,KAAJ,CAAxC;AAAA,MAAoDC,QAApD;AAAA,MAA8DC,OAA9D,uEAAwE,CAAxE;AAAA,SAA8E,MAAOC,QAAP,IAAoB;AAC3HC,IAAAA,OAAO,CAACC,GAAR,CAAYhB,OAAZ;;AACA,QAAI;AACHc,MAAAA,QAAQ,CAAC;AAAEG,QAAAA,IAAI,EAAEhB;AAAR,OAAD,CAAR;AACA,UAAIiB,IAAI,GAAI,GAAElB,OAAQ,4BAA2BS,OAAQ,SAAQC,WAAY,eAAcC,KAAK,CAAC,CAAD,CAAI,eAAcA,KAAK,CAAC,CAAD,CAAI,iBAAgBE,OAAQ,EAAnJ;;AACA,UAAID,QAAJ,EAAc;AACZM,QAAAA,IAAI,GAAI,GAAElB,OAAQ,4BAA2BS,OAAQ,SAAQC,WAAY,eAAcC,KAAK,CAAC,CAAD,CAAI,eAAcA,KAAK,CAAC,CAAD,CAAI,aAAYC,QAAS,iBAAgBC,OAAQ,EAApK;AACD;;AACD,YAAM;AAAEM,QAAAA;AAAF,UAAW,MAAMpB,KAAK,CAACqB,GAAN,CAAUF,IAAV,CAAvB;AACAJ,MAAAA,QAAQ,CAAC;AACRG,QAAAA,IAAI,EAAEf,mBADE;AAERmB,QAAAA,OAAO,EAAEF;AAFD,OAAD,CAAR;AAIA,KAXD,CAWE,OAAOG,KAAP,EAAc;AACfR,MAAAA,QAAQ,CAAC;AACRG,QAAAA,IAAI,EAAEd,gBADE;AAERkB,QAAAA,OAAO,EAAEC,KAAK,CAACC,QAAN,CAAeJ,IAAf,CAAoBK;AAFrB,OAAD,CAAR;AAIA;AACD,GAnByB;AAAA,CAAnB;AAqBP,OAAO,MAAMC,iBAAiB,GAAIC,EAAD,IAAQ,MAAOZ,QAAP,IAAoB;AAC5D,MAAI;AACHA,IAAAA,QAAQ,CAAC;AAAEG,MAAAA,IAAI,EAAEb;AAAR,KAAD,CAAR;AACA,UAAM;AAAEe,MAAAA;AAAF,QAAW,MAAMpB,KAAK,CAACqB,GAAN,CAAW,GAAEpB,OAAQ,mBAAkB0B,EAAG,EAA1C,CAAvB;AACAZ,IAAAA,QAAQ,CAAC;AACRG,MAAAA,IAAI,EAAEX,uBADE;AAERe,MAAAA,OAAO,EAAEF,IAAI,CAACQ;AAFN,KAAD,CAAR;AAIA,GAPD,CAOE,OAAOL,KAAP,EAAc;AACfR,IAAAA,QAAQ,CAAC;AACRG,MAAAA,IAAI,EAAEZ,oBADE;AAERgB,MAAAA,OAAO,EAAEC,KAAK,CAACC,QAAN,CAAeJ,IAAf,CAAoBK;AAFrB,KAAD,CAAR;AAIA;AACD,CAdM;AAgBP,OAAO,MAAMI,WAAW,GAAG,MAAM,MAAOd,QAAP,IAAoB;AACpDA,EAAAA,QAAQ,CAAC;AAAEG,IAAAA,IAAI,EAAEV;AAAR,GAAD,CAAR;AACA,CAFM","sourcesContent":["import axios from \"axios\";\r\nimport { baseURL } from \"../utils/requestUtil\"\r\nimport {\r\n\tALL_PRODUCT_REQUEST,\r\n\tALL_PRODUCT_SUCCESS,\r\n\tALL_PRODUCT_FAIL,\r\n\tPRODUCT_DETAILS_REQUEST,\r\n\tPRODUCT_DETAILS_FAIL,\r\n\tPRODUCT_DETAILS_SUCCESS,\r\n\tCLEAR_ERRORS\r\n} from \"../constants/productConstants\";\r\n\r\nexport const getProduct = (keyword = \"\", currentPage = 1, price = [0, 25000], category, ratings = 0) => async (dispatch) => {\r\n\tconsole.log(baseURL)\r\n\ttry {\r\n\t\tdispatch({ type: ALL_PRODUCT_REQUEST });\r\n\t\tlet link = `${baseURL}/api/v1/products?keyword=${keyword}&page=${currentPage}&price[gte]=${price[0]}&price[lte]=${price[1]}&ratings[gte]=${ratings}`;\r\n\t\tif (category) {\r\n\t\t  link = `${baseURL}/api/v1/products?keyword=${keyword}&page=${currentPage}&price[gte]=${price[0]}&price[lte]=${price[1]}&category=${category}&ratings[gte]=${ratings}`;\r\n\t\t}\r\n\t\tconst { data } = await axios.get(link);\r\n\t\tdispatch({ \r\n\t\t\ttype: ALL_PRODUCT_SUCCESS,\r\n\t\t\tpayload: data\r\n\t\t});\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: ALL_PRODUCT_FAIL,\r\n\t\t\tpayload: error.response.data.message,\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport const getProductDetails = (id) => async (dispatch) => {\r\n\ttry {\r\n\t\tdispatch({ type: PRODUCT_DETAILS_REQUEST });\r\n\t\tconst { data } = await axios.get(`${baseURL}/api/v1/product/${id}`);\r\n\t\tdispatch({\r\n\t\t\ttype: PRODUCT_DETAILS_SUCCESS,\r\n\t\t\tpayload: data.product,\r\n\t\t});\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: PRODUCT_DETAILS_FAIL,\r\n\t\t\tpayload: error.response.data.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport const clearErrors = () => async (dispatch) => {\r\n\tdispatch({ type: CLEAR_ERRORS });\r\n}\r\n"]},"metadata":{},"sourceType":"module"}